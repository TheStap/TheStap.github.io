(this.webpackJsonprandom_game=this.webpackJsonprandom_game||[]).push([[0],{101:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},107:function(e,t,a){"use strict";a.r(t);var n,r=a(2),c=a(0),i=a.n(c),o=a(10),s=a.n(o),u=(a(77),a(9)),d=a(43),l=(a(78),a(30)),m=a(7),j=a(11),f=a(127),b=a(32),g=a.n(b),h=a(40),O=a(28),v={apiKey:"edf3ee6108514fe8b855bccdc5d3fb96",baseURL:"https://api.rawg.io/api/",earliestReleaseYearInBase:1971,maxPageSize:40,maxAnswers:6,maxGamesToAnswer:12},p=a(60),x=a.n(p).a.create({baseURL:v.baseURL,params:{key:v.apiKey}});function w(e,t){var a=e+Math.random()*(t+1-e);return Math.floor(a)}function y(e){return w(0,e.length-1)}function C(e){return e[y(e)]}!function(e){e.Finished="finished",e.Pending="pending",e.Rejected="rejected",e.Idle="idle"}(n||(n={}));var G,S=v.maxPageSize,k=v.maxGamesToAnswer,A=v.maxAnswers,F=(new Date).getFullYear(),M={genre:null,yearFrom:v.earliestReleaseYearInBase,yearTo:F,page:1,pageSize:A,additionalData:{genres:{items:[],status:n.Idle,error:""}}},T="filter",_=Object(O.b)("".concat(T,"/fetchGenres"),Object(h.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("genres");case 2:return t=e.sent,e.abrupt("return",t.data.results);case 4:case"end":return e.stop()}}),e)})))),D=Object(O.c)({name:T,initialState:M,reducers:{setFilterState:function(e,t){return Object(u.a)(Object(u.a)({},e),t.payload)},clearFilterState:function(e){var t=Object(u.a)({},M);return delete t.additionalData,Object(u.a)(Object(u.a)({},e),t)},setFilterStateToMakeGameMoreDifficult:function(e,t){var a=t.payload,n=a.videogamesCount,r=a.correctAnswersCount;n>1e4&&(n=1e4);var c=Math.floor(n/S/k),i=Math.floor(c/k)*(r+1);e.page=c*r+w(i,c)}},extraReducers:function(e){e.addCase(_.fulfilled,(function(e,t){var a=t.payload;e.additionalData.genres.status=n.Finished,e.additionalData.genres.items=a})),e.addCase(_.pending,(function(e){e.additionalData.genres.status=n.Pending})),e.addCase(_.rejected,(function(e){e.additionalData.genres.status=n.Finished,e.additionalData.genres.error="Unable to load genres"}))}}),P=D.actions,z=P.setFilterState,I=P.clearFilterState,R=P.setFilterStateToMakeGameMoreDifficult,Y=function(e){return e.filter},L=D.reducer,N=v.maxAnswers;!function(e){e.Easy="easy",e.Medium="medium",e.Hardcore="hardcore"}(G||(G={}));var B={videoGames:{items:[],count:0,status:n.Idle,error:""},difficulty:null,answersCount:{correct:0,wrong:0},videoGameToAnswerId:null,answers:[],videoGameScreen:""},W="game",H=Object(O.b)("".concat(W,"/fetchGames"),function(){var e=Object(h.a)(g.a.mark((function e(t,a){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.getState(),e.next=3,x.get("games",{params:U(Object(u.a)({},n.filter))});case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}());function U(e){var t=e.genre,a=e.yearFrom,n=void 0===a?v.earliestReleaseYearInBase:a,r=e.yearTo,c=void 0===r?F:r,i=e.page,o=void 0===i?1:i,s=e.pageSize,u={page_size:void 0===s?6:s,dates:"".concat(n,"-01-01,").concat(c,"-12-31"),platforms:"4",page:o};return t&&(u.genres=t.id.toString()),u}var E=Object(O.c)({name:W,initialState:B,reducers:{incrementCorrectAnswersCount:function(e){e.answersCount.correct++},incrementWrongAnswersCount:function(e){e.answersCount.wrong++},setDifficulty:function(e,t){var a=t.payload;e.difficulty=a},clearGameState:function(){return B}},extraReducers:function(e){e.addCase(H.fulfilled,(function(e,t){var a=t.payload,r=a.results,c=a.count;e.videoGames.status=n.Finished,e.videoGames.items=r,e.videoGames.count=c;var i=C(r);e.videoGameToAnswerId=i.id;var o=function(e,t){var a=N-1;if(!e.length)return[];if(e.length===a)return e;for(var n=new Set;n.size<a;){var r=C(e);r.id!==t.id&&n.add(r)}return Array.from(n)}(r,i);o.splice(y(o),0,i),e.answers=o;var s=i.short_screenshots;e.videoGameScreen=s[w(1,s.length-1)].image})).addCase(H.pending,(function(e){e.videoGames.status=n.Pending,e.videoGameToAnswerId=null,e.videoGames.items=[]})).addCase(H.rejected,(function(e){e.videoGames.status=n.Finished,e.videoGames.error="Unable to load games"}))}}),q=E.actions,J=q.incrementCorrectAnswersCount,K=q.incrementWrongAnswersCount,$=q.setDifficulty,Q=q.clearGameState,V=function(e){return e.game.videoGames.status===n.Pending},X=function(e){return e.game},Z=E.reducer,ee=Object(O.a)({reducer:{filter:L,game:Z}}),te=function(){return Object(j.b)()},ae=a(126),ne=(a(101),a(31));var re=function(){var e=Object(m.g)(),t=te(),a=Object(j.c)((function(e){return e.game.videoGames.error})),n=Object(ne.b)().enqueueSnackbar,i=Object(c.useCallback)((function(){t(I()),t($(G.Hardcore)),t(H()).then((function(){e.push(Oe.game.path)}))}),[t,e]);return Object(c.useEffect)((function(){a&&n(a,{variant:"error"})}),[n,a]),Object(r.jsx)(ae.a,{className:"difficulty",children:Object(r.jsx)(f.a,{variant:"contained",size:"large",color:"secondary",onClick:i,children:"Start"})})},ce=a(123);a(103);function ie(e){var t=e.children;return Object(r.jsx)(ce.a,{className:"stretchContainer",maxWidth:"md",children:t})}var oe=a(124);a(104);function se(){return Object(r.jsx)(ae.a,{className:"loader",children:Object(r.jsx)(oe.a,{})})}function ue(e){var t=e.children;return e.isLoading?Object(r.jsx)(se,{}):Object(r.jsx)(r.Fragment,{children:t})}var de=function(){var e=Object(j.c)(V);return Object(r.jsx)(ie,{children:Object(r.jsxs)(ue,{isLoading:e,children:[Object(r.jsxs)("h1",{children:["How good do you know videogames? ",Object(r.jsx)("br",{}),"Guess the videogame from the screenshot!"]}),Object(r.jsx)("h2",{children:"You have to guess from all PC games. The more often you guess the harder it gets"}),Object(r.jsx)(re,{})]})})},le=a(64),me=(a(105),a(13)),je=Object(me.a)({root:{marginRight:"10px",marginBottom:"10px"}})(f.a);var fe=function(e){var t=e.model,a=e.onClick;return Object(r.jsx)(je,{onClick:function(){return a(t)},variant:"outlined",size:"large",color:"primary",children:t.name},t.id)},be=v.maxPageSize,ge=v.maxGamesToAnswer;var he=v.maxGamesToAnswer;var Oe={start:{path:"/",component:de,exact:!0},game:{path:"/game",component:function(){var e=Object(j.b)(),t=Object(m.g)(),a=Object(ne.b)().enqueueSnackbar,n=Object(c.useState)(!1),i=Object(le.a)(n,2),o=i[0],s=i[1],d=Object(j.c)(X),l=Object(j.c)(Y),f=Object(j.c)(V),b=Object(c.useMemo)((function(){return o?"game__screenshot":"game__screenshot game__screenshot--hidden"}),[o]),g=d.answersCount,h=g.correct,O=g.wrong,v=Object(c.useMemo)((function(){return h+O}),[h,O]),p=Object(c.useMemo)((function(){return v===ge-1}),[v]),x=Object(c.useCallback)((function(e,t){p||a(e,{variant:t})}),[a,p]),w=Object(c.useCallback)((function(a){v||e(z(Object(u.a)(Object(u.a)({},l),{},{pageSize:be}))),a.id===d.videoGameToAnswerId?(x("You are right!","success"),e(J()),e(R({videogamesCount:d.videoGames.count,correctAnswersCount:h}))):(x("Nope","error"),e(K()),e(z(Object(u.a)(Object(u.a)({},l),{},{page:l.page+1})))),p?t.push(Oe.finish.path):(s(!1),e(H()))}),[v,h,e,l,d.videoGameToAnswerId,d.videoGames.count,p,t,x]);return Object(r.jsx)(ie,{children:Object(r.jsxs)(ae.a,{className:"game",children:[Object(r.jsxs)("h2",{className:"game__games-count",children:[v+1,"/",ge]}),Object(r.jsx)(ue,{isLoading:f||!o,children:Object(r.jsx)(ae.a,{className:"game__answers",children:d.answers.map((function(e){return Object(r.jsx)(fe,{model:e,onClick:w},e.id)}))})}),Object(r.jsx)(ae.a,{children:Object(r.jsx)("img",{onLoad:function(){return s(!0)},alt:"",className:b,src:d.videoGameScreen})})]})})},isPrivate:!0},finish:{path:"/finish",component:function(){var e=Object(m.g)(),t=te(),a=Object(j.c)(V),n=Object(j.c)((function(e){return e.game.answersCount})).correct,i=Object(c.useMemo)((function(){var e=he/2;return n===he?"Wow you are true gamer!":n>e?"You are real gamer.":n===e?"You are average gamer.":n<e?"You don't often playing videogames.":void 0}),[n]),o=Object(c.useCallback)((function(){t(Q()),t(I()),t($(G.Hardcore)),t(H()).then((function(){e.push(Oe.game.path)}))}),[t,e]);return Object(r.jsx)(ie,{children:Object(r.jsxs)(ue,{isLoading:a,children:[Object(r.jsx)("h1",{children:i}),Object(r.jsxs)("h2",{children:["Games answered ",n," out of ",he]}),Object(r.jsx)(f.a,{variant:"contained",size:"large",color:"secondary",onClick:o,children:"Play again"})]})})},isPrivate:!0}},ve=Object.values(Oe);function pe(e){var t=e.children,a=Object(d.a)(e,["children"]),n=Object(j.c)((function(e){return e.game.difficulty}));return Object(r.jsx)(m.b,Object(u.a)(Object(u.a)({},a),{},{render:function(e){var a=e.location;return n?t:Object(r.jsx)(m.a,{to:{pathname:Oe.start.path,state:{from:a}}})}}))}var xe=function(){return Object(r.jsx)(l.a,{children:Object(r.jsx)(m.d,{children:ve.map((function(e,t){var a=e.component,n=e.isPrivate,c=Object(d.a)(e,["component","isPrivate"]),i=n?pe:m.b;return Object(r.jsx)(i,Object(u.a)(Object(u.a)({},c),{},{children:Object(r.jsx)(a,{})}),t)}))})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(106);s.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(ne.a,{autoHideDuration:2e3,maxSnack:1,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:Object(r.jsx)(j.a,{store:ee,children:Object(r.jsx)(xe,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},77:function(e,t,a){},78:function(e,t,a){}},[[107,1,2]]]);
//# sourceMappingURL=main.df54ad2b.chunk.js.map